{"version":3,"sources":["scripts/news.js"],"names":["$","ajax","url","type","dataType","done","res","console","log","count","results","forEach","v","i","a","summary","length","page","clipimg","substr","created_time","replace","html","each","parentNode","css","height","width"],"mappings":"aAAAA,EAAA,WACAA,EAAAC,KAAA,CACAC,IAAA,2CACAF,KAAAA,MACAE,SAAAA,OACAC,KAAAA,CACAC,UAAAA,MAEAC,KAAA,SAAAC,GALA,GAIAC,QAAAC,IAAAF,GAJA,EAAAA,EAAAG,MAAA,CAQAF,IAAAA,EAAAA,GACAD,EAAAI,QAAAC,QAAA,SAAAC,EAAAC,GACA,IAAAC,EAAA,GAAAF,EAAAG,QAAAC,OAAA,MAAA,GACAV,GAAAA,8DAEAW,EAAAA,GAFAX,0EAgBAN,EAAAA,UAhBAM,gGAmBAY,EAAAA,MAnBAZ,8BAoBAM,EAAAG,QAAAI,OAAA,EAAA,IAAAL,GApBAR,+BAqBAM,EAAAQ,aAAAC,QAAA,IAAA,gBArBAf,qEA0BAN,EAAA,cAAAsB,KAAAL,MAEAZ,KAAA,SAAAC,GAJAN,EAAA,kBAAAuB,KAAA,SAAAV,EAAAD,GACAZ,EAAAY,EAAAY,YAAAC,IAAA,CACAC,OAAA,IAAA1B,EAAAY,GAAAe","file":"news.js","sourcesContent":["$(function () {\r\n  //请求到的信息列表\r\n  function getnews() {\r\n    $.ajax({\r\n      url: 'http://test.oms.hwariot.com/api/v1/news/',\r\n      type: 'GET',\r\n      dataType: \"json\",\r\n      data: {\r\n        'page_size':''\r\n      },\r\n    }).done(res => {\r\n      console.log(res)\r\n      if (res.count > 0) {\r\n        var page ='';\r\n        res.results.forEach((v,i)=>{\r\n          var a = v.summary.length > 40 ? \"...\" : \"\";\r\n          page +=`\r\n          <li>\r\n            <a href=\"/@/newsdetail.html?id=${v.id}\">\r\n              <div class=\"imgbox\">\r\n                <div><img src=\"${v.image_url}\" alt=\"\"></div>\r\n              </div>\r\n              <div class=\"text\">\r\n                <h3>${v.title}</h3>\r\n                <p>${v.summary.substr(0, 40)+a}</p>\r\n                <span>${v.created_time.replace('T','&nbsp;&nbsp;')}</span>\r\n              </div>\r\n            </a>\r\n          </li>`\r\n        })\r\n        $('#news-list').html(page)\r\n      }      \r\n    }).done(res =>{\r\n      clipimg()\r\n    })\r\n  }\r\n\r\n  function clipimg() {\r\n    $('#news-list img').each(function (i, v) {\r\n      $(v.parentNode).css({\r\n        'height': $(v).width() * 0.66\r\n      })\r\n    })\r\n  }\r\n  getnews()\r\n})"]}