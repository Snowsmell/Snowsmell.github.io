"use strict";$(function(){function e(e){var t=e||navigator.userAgent;return/msie/i.test(t)?t.match(/msie (\d+\.\d+)/i)[1]:!(!~t.toLowerCase().indexOf("trident")||!~t.indexOf("rv"))&&t.match(/rv:(\d+\.\d+)/)[1]}var t;e()&&e()<10&&$("*").css("opacity","1"),$("#fullpage").fullpage({css3:!0,anchors:["homepage","energysave","innovation","partner","news"],menu:".menu",afterLoad:function(e,t){$(".homepage").hasClass("on")||setTimeout(function(){$(".homepage").addClass("on")},2e3),function(e){switch(e){case 2:$(".energysave").hasClass("on")||$(".energysave").addClass("on").find("li b").each(function(e,t){$(this).prop("Counter",0).animate({Counter:$(this).text()},{duration:2e3,easing:"swing",step:2==e?function(e){$(this).text(function(e){var t=parseFloat(e);if(isNaN(t))return!1;var n=(t=Math.round(10*e)/10).toString(),a=n.indexOf(".");a<0&&(a=n.length);return n}(e))}:function(e){$(this).text(Math.ceil(e))}})});break;case 3:$(".innovation").hasClass("on")||$(".innovation").addClass("on");break;case 4:$(".partner").hasClass("on")||$(".partner").addClass("on");break;case 5:$(".news").hasClass("on")||$(".news").addClass("on")}}(t)},onLeave:function(e,t){}}),$("#fourbubble").on("click","li",function(){var e=$(this).index();$("#fourcontent span").animate({left:12.5+25*e+"%"},100),$("#fourcontent p").eq(e).addClass("on").siblings("p").removeClass("on")}),$.ajax({url:"http://test.oms.hwariot.com/api/v1/news/?page_size=4",type:"GET",dataType:"json",data:{}}).done(function(e){if(0<e.count){var a="";e.results.forEach(function(e,t){var n=40<e.summary.length?"...":"";a+='<li><div class="imgbox"><div><img src='+e.image_url+'><a href="/newsdetail.html?id='+e.id+'"></a></div></div><h3>'+e.title+"</h3><p>"+e.summary.substr(0,40)+n+'</p><div><span class="date">'+e.created_time.replace("T","&nbsp;&nbsp;")+'</span><a href="/newsdetail.html?id='+e.id+'">详情 >></a></div></li>'}),$("#newslist ul").html(a)}}).done(function(e){768<$(window).width()&&function(){for(var e=document.getElementById("newslist"),n=e.querySelector("ul"),t=n.querySelectorAll("li"),a=1,s=(e.offsetWidth,t[0].offsetWidth),i=0;i<2;i++){var o=t[i].cloneNode(!0);n.appendChild(o)}[].forEach.call(n.querySelectorAll("li"),function(e,t){e.style.width=s+"px",n.style.width=6*s+"px"}),setInterval(function(){$(n).animate({marginLeft:-s*a++},500),5===a&&($(n).css({marginLeft:0}),a=1)},8e3)}(),$("#newslist img").each(function(e,t){$(t.parentNode).css({height:.66*$(t).width()})})}),t="aside",$(t).mouseenter(function(){var i=$(this).offset().left,o=$(this).offset().top,r=$(this).outerWidth(),l=$(this).outerHeight();$(this).mousemove(function(e){var a,s,t=e.pageX-i,n=e.pageY-o;a=t-r/2,s=l/2-n,$(this).find("img").each(function(e,t){var n=10+10*e;$(t).css({transform:"translateY("+a/n+"px) translateX("+s/n+"px) "})})})}),$(t).mouseleave(function(){$(this).css({})});var n=null;$(window).on("resize",function(){clearTimeout(n),n=setTimeout(function(){},300)})});
//# sourceMappingURL=index.js.map
